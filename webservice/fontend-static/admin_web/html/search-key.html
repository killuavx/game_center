<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="renderer" content="webkit">
	<title>搜索热词</title>
    <link rel="stylesheet" href="http://static.ccplay.com.cn/static/bootstrap3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://static.ccplay.com.cn/static/admin_web/style/site.css">
</head>

<body>
	

<div class="main game-ranking">



	<div class="main-top">    
            <h3>搜索热词 <small>共<span>3</span>个</small></h3>  
            
            
            <form class="form-inline pull-right search-box" role="form">
                <input type="text" class="form-control" placeholder="热词">
                <button type="button" class="btn btn-default">搜索</button>
                <button type="button" class="btn btn-primary">显示全部</button>
            </form>
              
    </div><!--main-top-->




<div class="panel panel-info">
  <div class="panel-heading">
  		<div class="pin">
          <button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span>删除</button>
          <button type="button" class="btn btn-primary add-btn"><span class="glyphicon glyphicon-plus"></span>添加热词</button>
          <button type="button" class="btn btn-success"><span class="glyphicon glyphicon-floppy-disk"></span>保存修改</button>
       </div>
  </div>
  		
        
        
        <table class="table" id="table_drag" style="display: none;"></table>
    
          <table class="table table-hover" id="table">
            <thead>
              <tr>
                <th class="th-checkbox"><input type="checkbox" id="check-btn" class="tag" title="" data-original-title="全选/反选"></th>
                <th class="th-sorting">游戏ID</th>
                <th class="th-name">名称</th>
                <th width="50">显示</th>
              </tr>
            </thead>
            <tbody class="class-list">
              <tr>
                <td><input type="checkbox" name="list-checkbox" value="001"></td>
                <td><input type="text"  value="" class="form-control"/></td>
                <td><input type="text"  value="酷酷爱魔兽" class="form-control"/></td>
                <td><input type="checkbox" checked></td>
              </tr>
              <tr>
                <td><input type="checkbox" name="list-checkbox" value="002"></td>
                <td><input type="text"  value="" class="form-control"/></td>
                <td><input type="text"  value="三剑豪" class="form-control"/></td>
                <td><input type="checkbox" checked></td>
              </tr>
              <tr>
                <td><input type="checkbox" name="list-checkbox" value="003"></td>
                <td><input type="text"  value="" class="form-control"/></td>
                <td><input type="text"  value="格斗冒险岛" class="form-control"/></td>
                <td><input type="checkbox"></td>
              </tr>
            </tbody>
          </table>

</div><!--panel-info-->
    






</div><!--main end-->
    
    




<script src="http://static.ccplay.com.cn/static/admin_web/style/jquery.min.js" type="text/javascript"></script>
<script src="http://static.ccplay.com.cn/static/common/js/jquery.pin.js" type="text/javascript"></script>
<script src="http://static.ccplay.com.cn/static/bootstrap3.2.0/js/bootstrap.min.js"></script>
<script>
$(function(){
	
	/*加载按钮*/
	$('.loading-btn').on('click', function () {
    	var $btn = $(this).button('loading')
    	// business logic...		
		setTimeout(function(){$btn.button('reset')},2000)
  	});
	
	/*锁定操作栏*/
	$(".pin").pin()
	
	
	/*添加榜单*/
	$(".add-btn").click(function() {
    $("tbody").append('<tr><td><input type="checkbox" name="list-checkbox" value=""></td><td><input type="text"  value="" class="form-control"/></td><td><input type="text"  value="" class="form-control"/></td><td><input type="checkbox" checked></td></tr>');
});
	
	
	/*全选 取消全选*/	
	var check_btn = document.getElementById("check-btn");
	var check_name = document.getElementsByName("list-checkbox");
	check_btn.onclick = function(){
		for(var i=1; i<=check_name.length; i+=1){
			if(check_name[i-1].checked){
				check_name[i-1].checked = false;
			}else{
				check_name[i-1].checked = true;
			}
		}
	};

	

});






/*TR拖动排序*/
jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(a){this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null,table_drag_flotage:$("#table_drag")},a||{});jQuery.tableDnD.makeDraggable(this)});jQuery(document).bind("mousemove",jQuery.tableDnD.mousemove).bind("mouseup",jQuery.tableDnD.mouseup);return this},makeDraggable:function(c){var b=c.tableDnDConfig;if(c.tableDnDConfig.dragHandle){var a=jQuery("td."+c.tableDnDConfig.dragHandle,c);a.each(function(){jQuery(this).mousedown(function(e){jQuery.tableDnD.dragObject=this.parentNode;jQuery.tableDnD.currentTable=c;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,e);if(b.onDragStart){b.onDragStart(c,this)}return false})})}else{var d=jQuery("tbody tr",c);d.each(function(){var e=jQuery(this);if(!e.hasClass("nodrag")){e.mousedown(function(f){b.table_drag_flotage.html(e.prop("outerHTML"));if(f.target.tagName=="TD"){jQuery.tableDnD.dragObject=this;jQuery.tableDnD.currentTable=c;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(this,f);if(b.onDragStart){b.onDragStart(c,this)}return false}}).css("cursor","move")}})}},updateTables:function(){this.each(function(){if(this.tableDnDConfig){jQuery.tableDnD.makeDraggable(this)}})},mouseCoords:function(a){if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}return{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(d,c){c=c||window.event;var b=this.getPosition(d);var a=this.mouseCoords(c);return{x:a.x-b.x,y:a.y-b.y}},getPosition:function(c){var b=0;var a=0;if(c.offsetHeight==0){c=c.firstChild}while(c.offsetParent){b+=c.offsetLeft;a+=c.offsetTop;c=c.offsetParent}b+=c.offsetLeft;a+=c.offsetTop;return{x:b,y:a}},mousemove:function(g){if(jQuery.tableDnD.dragObject==null){return}var d=jQuery(jQuery.tableDnD.dragObject);var b=jQuery.tableDnD.currentTable.tableDnDConfig;var i=jQuery.tableDnD.mouseCoords(g);var f=i.y-jQuery.tableDnD.mouseOffset.y;b.table_drag_flotage.css("top",f+"px").show();var c=window.pageYOffset;if(document.all){if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){c=document.documentElement.scrollTop}else{if(typeof document.body!="undefined"){c=document.body.scrollTop}}}if(i.y-c<b.scrollAmount){window.scrollBy(0,-b.scrollAmount)}else{var a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(a-(i.y-c)<b.scrollAmount){window.scrollBy(0,b.scrollAmount)}}if(f!=jQuery.tableDnD.oldY){var e=f>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=f;if(b.onDragClass){d.addClass(b.onDragClass)}else{d.css(b.onDragStyle)}var h=jQuery.tableDnD.findDropTargetRow(d,f);if(h){if(e&&jQuery.tableDnD.dragObject!=h){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,h.nextSibling)}else{if(!e&&jQuery.tableDnD.dragObject!=h){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,h)}}}}return false},findDropTargetRow:function(f,g){var j=jQuery.tableDnD.currentTable.rows;for(var e=0;e<j.length;e++){var h=j[e];var b=this.getPosition(h).y;var a=parseInt(h.offsetHeight)/2;if(h.offsetHeight==0){b=this.getPosition(h.firstChild).y;a=parseInt(h.firstChild.offsetHeight)/2}if((g>b-a)&&(g<(b+a))){if(h==f){return null}var c=jQuery.tableDnD.currentTable.tableDnDConfig;if(c.onAllowDrop){if(c.onAllowDrop(f,h)){return h}else{return null}}else{var d=jQuery(h).hasClass("nodrop");if(!d){return h}else{return null}}return h}}return null},mouseup:function(c){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){var b=jQuery.tableDnD.dragObject;var a=jQuery.tableDnD.currentTable.tableDnDConfig;if(a.onDragClass){jQuery(b).removeClass(a.onDragClass)}else{jQuery(b).css(a.onDropStyle)}jQuery.tableDnD.dragObject=null;if(a.onDrop){a.onDrop(jQuery.tableDnD.currentTable,b)}jQuery.tableDnD.currentTable=null;a.table_drag_flotage.hide()}},serialize:function(){if(jQuery.tableDnD.currentTable){return jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable)}else{return"错误啦~"}},serializeTable:function(d){var a="";var c=d.id;var e=d.rows;for(var b=0;b<e.length;b++){if(a.length>0){a+="&"}var f=e[b].id;if(f&&f&&d.tableDnDConfig&&d.tableDnDConfig.serializeRegexp){f=f.match(d.tableDnDConfig.serializeRegexp)[0]}a+=c+"[]="+f}return a},serializeTables:function(){var a="";this.each(function(){a+=jQuery.tableDnD.serializeTable(this)});return a}};jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables});
$(document).ready(function() {
	$("#table").tableDnD({
		onDrop: function() {
			var table = document.getElementById("table");
			var tr = table.getElementsByTagName("tr");
			for (var i = 0; i < tr.length; i++) {
				var rowid = tr[i].getAttribute("id");
				/*数据接口  tr加id=""
				alert("排序完成后表格的第 " + (i+1) + " 行id为 : " + rowid);
				*/
			}
		}
	});
});


</script>

</body>
</html>
